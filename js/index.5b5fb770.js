(function(e){function t(t){for(var n,c,i=t[0],o=t[1],s=t[2],d=0,b=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(l,c)&&l[c]&&b.push(l[c][0]),l[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(b.length)b.shift()();return r.push.apply(r,s||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var o=a[i];0!==l[o]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},l={index:0},r=[];function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/json-logic-vue/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1571:function(e,t){},"215e":function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23"),l=(a("b64b"),{class:"col-lg-12 mx-auto p-3"}),r=Object(n["f"])("header",null,[Object(n["f"])("div",{class:"fs-2"},"JsonLogic demo"),Object(n["f"])("p",null,[Object(n["g"])(" This tool is for testing and sharing "),Object(n["f"])("a",{href:"https://jsonlogic.com"},"JsonLogic"),Object(n["g"])(" expressions. If you enter a valid JsonLogic or JavaScript equivalent expression it will be evaluated. All variable value combinations are shown. Tap or click a variable in the Context section to edit the values. ")])],-1),c={class:"row"},i={class:"col-lg"},o=["disabled"],s=Object(n["f"])("div",{class:"fs-4 mb-1"},"Expression",-1),u=Object(n["f"])("div",{class:"fs-4 mt-2"},"Context",-1),d={class:"col-lg"},b=["disabled"],f=Object(n["f"])("div",{class:"fs-4"},"Evaluation",-1),v={class:"modal fade",id:"shareModal",tabindex:"-1","aria-labelledby":"Share expression and variable values","aria-hidden":"true"},p={class:"modal-dialog"},j={class:"modal-content"},O=Object(n["f"])("div",{class:"modal-header"},[Object(n["f"])("h5",{class:"modal-title",id:"exampleModalLabel"}," Share example via url "),Object(n["f"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),h={class:"modal-body"},m=Object(n["g"])("Use this "),x=["href"],y=Object(n["g"])(" to share this example."),g=Object(n["f"])("div",{class:"modal-footer"},[Object(n["f"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1);function S(e,t,a,S,V,k){var C=Object(n["q"])("json-editor"),I=Object(n["q"])("text-editor"),U=Object(n["q"])("context-table"),w=Object(n["q"])("evaluation-table");return Object(n["m"])(),Object(n["e"])(n["a"],null,[Object(n["f"])("div",l,[r,Object(n["f"])("main",null,[Object(n["f"])("div",c,[Object(n["f"])("div",i,[Object(n["f"])("button",{type:"button",class:"btn btn-primary btn-sm float-end",onClick:t[0]||(t[0]=function(e){V.expr={},V.context=[]}),disabled:0==Object.keys(V.expr).length}," Clear ",8,o),s,Object(n["h"])(C,{value:V.expr,onUpdate:k.updateExpr},null,8,["value","onUpdate"]),Object(n["h"])(I,{value:V.expr,onUpdate:k.updateExpr},null,8,["value","onUpdate"]),u,Object(n["h"])(U,{context:V.context,variables:k.variables,onUpdate:t[1]||(t[1]=function(e){return V.context=e})},null,8,["context","variables"])]),Object(n["f"])("div",d,[Object(n["f"])("button",{type:"button",class:"btn btn-primary btn-sm float-end",disabled:0==Object.keys(V.expr).length,"data-bs-toggle":"modal","data-bs-target":"#shareModal"}," Share ",8,b),f,Object(n["h"])(w,{expr:V.expr,context:V.context,variables:k.variables},null,8,["expr","context","variables"])])])])]),Object(n["f"])("div",v,[Object(n["f"])("div",p,[Object(n["f"])("div",j,[O,Object(n["f"])("div",h,[Object(n["f"])("p",null,[m,Object(n["f"])("a",{href:k.shareURL()},"url",8,x),y])]),g])])])],64)}var V=a("3835"),k=a("b85c"),C=(a("d3b7"),a("3ca3"),a("ddb0"),a("9861"),a("ac1f"),a("841c"),a("caad"),a("2532"),a("1276"),a("e9c4"),a("4de4"),a("b0c0"),a("a434"),Object(n["f"])("div",{class:"text-secondary small mb-2"},"JsonLogic",-1));function I(e,t,a,l,r,c){var i=Object(n["q"])("v-ace-editor");return Object(n["m"])(),Object(n["e"])(n["a"],null,[Object(n["h"])(i,{value:c.text,"onUpdate:value":t[0]||(t[0]=function(e){return c.text=e}),onInit:c.handleInit,lang:"json",theme:"textmate",options:{tabSize:2,useWorker:!0},style:{height:"300px","border-radius":".25rem",border:"1px solid #ced4da"}},null,8,["value","onInit"]),C],64)}var U=a("f41e"),w=a("6d4f"),J=a.n(w),M=(a("55e5"),a("b47b"),a("1d06")),q=a.n(M);J.a.config.setModuleUrl("ace/mode/json_worker",q.a);var A={props:{value:Object},data:function(){return{jsonValid:!0}},components:{VAceEditor:U["a"]},emits:["update","valid"],computed:{text:{get:function(){return JSON.stringify(this.value,null,2)},set:function(e){var t;if(e.length>0)try{e!==this.text&&(t=JSON.parse(e),this.jsonValid=!0,this.$emit("update",t))}catch(a){this.jsonValid=!1}},jsonInvalid:function(){return!this.jsonValid}},style:function(){return"height: 300px; border: "+(this.jsonValid?"grey":"red")+" 1px dashed"}},methods:{handleInit:function(e){var t=this;e.getSession().on("changeAnnotation",(function(){var a=0==e.getSession().getAnnotations();a!=this.jsonValid&&(t.$emit("valid",a),t.jsonValid=a)}))}}},$=a("1571"),_=a.n($),E=a("6b0d"),L=a.n(E);"function"===typeof _.a&&_()(A);const P=L()(A,[["render",I]]);var N=P,T={class:"small text-secondary"},R=Object(n["g"])("JavaScript"),z={key:0,class:"small text-danger"};function K(e,t,a,l,r,c){return Object(n["m"])(),Object(n["e"])(n["a"],null,[Object(n["t"])(Object(n["f"])("input",{ref:"textEditor",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.render=e}),class:"form-control"},null,512),[[n["s"],c.render]]),Object(n["f"])("div",T,[R,r.valid?Object(n["d"])("",!0):(Object(n["m"])(),Object(n["e"])("span",z," - "+Object(n["r"])(r.validation),1))])],64)}var W,B=a("ae4e"),D=a("08ad"),F=a.n(D),G={props:{value:{type:Object,required:!0}},data:function(){return{valid:!0,validation:""}},emits:["update","valid"],computed:{render:{get:function(){return this.valid?Object(B["a"])(this.value):this.$refs.textEditor.value},set:function(e){var t=this;clearTimeout(W),W=setTimeout((function(){try{var a=F()(e);t.valid||(t.valid=!0,t.$emit("valid",!0),t.validation=""),t.value!=a&&t.$emit("update",a)}catch(n){t.valid&&(t.valid=!1,t.$emit("valid",!1)),t.validation=n.message}}),400)}}}},H=a("5bd8"),Q=a.n(H);"function"===typeof Q.a&&Q()(G);const X=L()(G,[["render",K]]);var Y=X,Z=function(e){return Object(n["o"])("data-v-f3c95d66"),e=e(),Object(n["n"])(),e},ee={class:"table"},te=Z((function(){return Object(n["f"])("thead",null,[Object(n["f"])("tr",null,[Object(n["f"])("th",null,"variable"),Object(n["f"])("th",null,"value(s)")])],-1)})),ae=["onClick"],ne=["onClick"],le=["onClick"],re={class:"modal",tabindex:"-1",ref:"variableModal"},ce={class:"modal-dialog"},ie={class:"modal-content"},oe={class:"modal-header"},se={class:"modal-title"},ue=["disabled"],de={class:"modal-body"},be={class:"table"},fe=["onClick"],ve=["onClick"],pe=["value"],je={key:0,class:"text-danger small"},Oe={class:"modal-footer"},he=["disabled"],me=["disabled"];function xe(e,t,a,l,r,c){return Object(n["m"])(),Object(n["e"])(n["a"],null,[Object(n["f"])("table",ee,[te,Object(n["f"])("tbody",null,[(Object(n["m"])(!0),Object(n["e"])(n["a"],null,Object(n["p"])(a.context,(function(e){return Object(n["m"])(),Object(n["e"])("tr",{key:e,class:Object(n["l"])({"text-muted text-decoration-line-through":!a.variables.includes(e.name)})},[Object(n["f"])("td",{onClick:function(t){return c.openModal(e)},class:"clickable"},Object(n["r"])(e.name),9,ae),Object(n["f"])("td",null,[Object(n["f"])("span",{onClick:function(t){return c.openModal(e)},class:"clickable"},Object(n["r"])(c.renderValues(e.values)),9,ne),a.variables.includes(e.name)?Object(n["d"])("",!0):(Object(n["m"])(),Object(n["e"])("button",{key:0,type:"button",onClick:function(t){return c.removeVar(e)},class:"btn btn-light btn-sm float-end"}," × ",8,le))])],2)})),128))])]),Object(n["f"])("div",re,[Object(n["f"])("div",ce,[Object(n["f"])("div",ie,[Object(n["f"])("div",oe,[Object(n["f"])("h5",se,"Edit variable: "+Object(n["r"])(r.current.name),1),Object(n["f"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",disabled:!c.emptyValue},null,8,ue)]),Object(n["f"])("div",de,[Object(n["f"])("table",be,[Object(n["f"])("tbody",null,[(Object(n["m"])(!0),Object(n["e"])(n["a"],null,Object(n["p"])(r.current.values,(function(t,a){return Object(n["m"])(),Object(n["e"])("tr",{key:a,class:Object(n["l"])({"table-active":a==r.modalState.valueIdx})},[Object(n["f"])("td",null,[Object(n["f"])("span",{onClick:function(e){return c.selectContextValue(a)},class:"clickable"},Object(n["r"])(e.renderValue(r.current.values[a])),9,fe),null!=t?(Object(n["m"])(),Object(n["e"])("button",{key:0,type:"button",onClick:function(e){return c.removeValue(a)},class:"btn btn-light btn-sm float-end"}," × ",8,ve)):Object(n["d"])("",!0)])],2)})),128))])]),Object(n["f"])("input",{type:"text",value:r.modalState.value,onKeyup:[t[0]||(t[0]=Object(n["u"])((function(){return c.enterUpdateContextValue&&c.enterUpdateContextValue.apply(c,arguments)}),["enter"])),t[1]||(t[1]=function(){return c.updateValue&&c.updateValue.apply(c,arguments)})],class:"my-2 form-control",ref:"editedValue"},null,40,pe),r.modalState.valid?Object(n["d"])("",!0):(Object(n["m"])(),Object(n["e"])("div",je,' Invalid. Accepted values include false, true, numbers, "strings" and JSON objects. '))]),Object(n["f"])("div",Oe,[Object(n["f"])("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=function(){return c.cancelUpdate&&c.cancelUpdate.apply(c,arguments)}),disabled:c.emptyValue}," Cancel ",8,he),Object(n["f"])("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=function(){return c.buttonUpdateContextValue&&c.buttonUpdateContextValue.apply(c,arguments)}),disabled:c.emptyValue}," Update ",8,me)])])])],512)],64)}var ye=a("2909"),ge=(a("498a"),a("a15b"),a("d81d"),a("7b17")),Se=a("53ca"),Ve=(a("25f0"),{methods:{renderValue:function(e){return null==e?"null":"string"==typeof e?'"'+e+'"':"object"==Object(Se["a"])(e)?JSON.stringify(e):e.toString()}}}),ke=null,Ce={props:{context:{type:Array,required:!0},variables:{type:Array,required:!0}},mixins:[Ve],emits:["update"],mounted:function(){ke=new ge["a"](this.$refs.variableModal)},data:function(){return{current:-1,modalState:{variableIdx:null,valueIdx:-1,valid:!0,value:null}}},computed:{emptyValue:function(){return null==this.modalState.value||this.modalState.value.trim&&0==this.modalState.value.trim().length}},methods:{renderValues:function(e){var t=this;return e.map((function(e){return t.renderValue(e)})).join(", ")},removeVar:function(e){var t=Object(ye["a"])(this.context);t.splice(this.context.indexOf(e),1),this.$emit("update",t)},openModal:function(e){this.current=e,this.modalState={variableIdx:this.context.indexOf(e),valueIdx:-1,valid:!0},ke.show()},selectContextValue:function(e){this.modalState.valueIdx==e?(this.modalState.valueIdx=-1,this.modalState.value=null):(this.modalState.valueIdx=e,this.modalState.value=this.renderValue(this.context[this.modalState.variableIdx].values[e]))},enterUpdateContextValue:function(e){this.updateContextValue(e.target.value)},buttonUpdateContextValue:function(){this.updateContextValue(this.modalState.value)},updateContextValue:function(e){try{var t=JSON.parse(e);this.modalState.valid=!0;var a=Object(ye["a"])(this.context);-1==this.modalState.valueIdx?a[this.modalState.variableIdx].values.push(t):a[this.modalState.variableIdx].values[this.modalState.valueIdx]=t,this.$emit("update",a),this.modalState.valueIdx=-1,this.$refs["editedValue"].value=null,this.modalState.value=null}catch(n){this.modalState.valid=!1,console.info("invalid variable value: ",e,"\n",n.message)}},removeValue:function(e){var t=Object(ye["a"])(this.context);t[this.modalState.variableIdx].values.splice(e,1),this.$emit("update",t),this.modalState.valueIdx==e&&(this.modalState.valueIdx=-1,this.modalState.valid=!0)},updateValue:function(e){this.modalState.value=e.target.value},cancelUpdate:function(){this.modalState.valueIdx=-1,this.modalState.value=null}}},Ie=(a("eb0e"),a("f0ac")),Ue=a.n(Ie);"function"===typeof Ue.a&&Ue()(Ce);const we=L()(Ce,[["render",xe],["__scopeId","data-v-f3c95d66"]]);var Je=we,Me={class:"table table-sm"},qe=Object(n["f"])("th",null,"result",-1),Ae={key:0};function $e(e,t,a,l,r,c){return Object(n["m"])(),Object(n["e"])("table",Me,[Object(n["f"])("thead",null,[Object(n["f"])("tr",null,[(Object(n["m"])(!0),Object(n["e"])(n["a"],null,Object(n["p"])(a.variables,(function(e){return Object(n["m"])(),Object(n["e"])("th",{key:e},Object(n["r"])(e),1)})),128)),qe])]),Object(n["f"])("tbody",null,[a.variables.length>0?(Object(n["m"])(!0),Object(n["e"])(n["a"],{key:0},Object(n["p"])(c.combinations,(function(t){return Object(n["m"])(),Object(n["e"])("tr",{key:t},[(Object(n["m"])(!0),Object(n["e"])(n["a"],null,Object(n["p"])(a.variables,(function(a){return Object(n["m"])(),Object(n["e"])("td",{key:a},Object(n["r"])(e.renderValue(t[a])),1)})),128)),Object(n["f"])("td",null,Object(n["r"])(e.renderValue(t._value)),1)])})),128)):(Object(n["m"])(),Object(n["e"])(n["a"],{key:1},[Object.keys(a.expr).length>0?(Object(n["m"])(),Object(n["e"])("tr",Ae,[Object(n["f"])("td",null,Object(n["r"])(e.renderValue(c.singleton)),1)])):Object(n["d"])("",!0)],64))])])}var _e=a("5530"),Ee=a("71be"),Le={props:{context:{type:Array,required:!0},expr:{type:Object,required:!0},variables:{type:Array,required:!0}},mixins:[Ve],computed:{combinations:function(){var e=this,t=[],a=this.context.filter((function(t){return e.variables.includes(t.name)})),n=this.variables;function l(e,r){for(var c=0,i=a[r].values.length;c<i;c++){var o=Object(_e["a"])({},e);o[n[r]]=a[r].values[c],r==a.length-1?t.push(o):l(o,r+1)}}if(a.length>0){l({},0);var r,c=Object(k["a"])(t);try{for(c.s();!(r=c.n()).done;){var i=r.value,o=Ee["apply"](this.expr,i);i._value=o}}catch(s){c.e(s)}finally{c.f()}}return t},singleton:function(){return Ee["apply"](this.expr)}}},Pe=a("215e"),Ne=a.n(Pe);"function"===typeof Ne.a&&Ne()(Le);const Te=L()(Le,[["render",$e]]);var Re=Te,ze={name:"App",data:function(){return{context:[],expr:{}}},components:{"json-editor":N,"text-editor":Y,"context-table":Je,"evaluation-table":Re},created:function(){var e=new URLSearchParams(window.location.search);e.get("context")&&(this.context=JSON.parse(e.get("context"))),e.get("expr")&&(this.expr=F()(e.get("expr")))},computed:{variables:function(){function e(t,a){if(null==t)return a;if(Object.keys(t).includes("var"))return a.push(t.var),a;if("string"==typeof t)return a;var n=Object.keys(t);if(n.length>0){var l=t[Object.keys(t)[0]];if(Array.isArray(l)){var r,c=Object(k["a"])(l);try{for(c.s();!(r=c.n()).done;){var i,o=r.value,s=e(o,[]),u=Object(k["a"])(s);try{for(u.s();!(i=u.n()).done;){var d=i.value,b=d.split(".")[0];a.includes(b)||a.push(b)}}catch(f){u.e(f)}finally{u.f()}}}catch(f){c.e(f)}finally{c.f()}return a}return e(l,a)}return a}return e(this.expr,[])}},methods:{shareURL:function(){var e=this;return"/json-logic-vue/?expr="+encodeURIComponent(Object(B["a"])(this.expr))+"&context="+encodeURIComponent(JSON.stringify(this.context.filter((function(t){return e.variables.includes(t.name)}))))},updateExpr:function(e){this.expr=null==e?{}:e}},watch:{expr:function(){var e,t=[],a=[],n=Object(k["a"])(this.context.entries());try{for(n.s();!(e=n.n()).done;){var l=Object(V["a"])(e.value,2),r=l[0],c=l[1];t.push(c.name),this.variables.includes(c.name)||1!=c.values.length||null!==c.values[0]||a.push(r)}}catch(f){n.e(f)}finally{n.f()}var i,o=Object(k["a"])(this.variables.filter((function(e){return!t.includes(e)})));try{for(o.s();!(i=o.n()).done;){var s=i.value;this.context.push({name:s,values:[null]})}}catch(f){o.e(f)}finally{o.f()}for(var u=0,d=a;u<d.length;u++){var b=d[u];this.context.splice(b,1)}}}},Ke=a("af2c"),We=a.n(Ke);"function"===typeof We.a&&We()(ze);const Be=L()(ze,[["render",S]]);var De=Be;a("ab8b");Object(n["c"])(De).mount("#app")},"5bd8":function(e,t){},af2c:function(e,t){},eb0e:function(e,t,a){"use strict";a("f0de")},f0ac:function(e,t){},f0de:function(e,t,a){}});
//# sourceMappingURL=index.5b5fb770.js.map